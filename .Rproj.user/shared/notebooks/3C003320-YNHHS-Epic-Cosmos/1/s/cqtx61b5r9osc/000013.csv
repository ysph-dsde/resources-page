"0","#| echo: false"
"0",""
"0","# Fetch and format the citations."
"0","citations <- get_citations("
"0","  keywords = c(""Yale New Haven Health System Epic"", ""Yale New Haven Health System Epic Cosmos"", ""YNHHS Epic"", ""YNHHS Epic Cosmos"", ""Electronic Health Record"", ""Electronic Health Records"", ""EHR""), "
"0","  affiliation = ""Yale School of Public Health"")"
"0",""
"0","# Condition the output based on presence of articles."
"0","citations_html <- make_pub_list(citations)"
"0","if(!any(str_detect(citations$citations, ""No publications""))) {"
"0","  citation_length <- length(citations$citations)"
"0","  citation_date   <- str_match(citations$query, ""\\((\\d{4}):(\\d{4})\\[dp\\]\\)"")[,2]"
"0","} else {"
"0","  citation_length <- 0"
"0","  citation_date   <- as.numeric(format(Sys.Date(), ""%Y"")) - as.numeric(str_extract(""No publications found in the last 25 years."", ""[0-9]{2}""))"
"0","}"
"0",""
